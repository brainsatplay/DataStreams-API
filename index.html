<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="./src/frontend/dist/browser.js"></script>
</head>
<body>
    <video style = "width: 300px; height: 150px;"></video>
</body>
<script type="module">

import * as datastreams from './src/frontend/dist/index.mjs'
const dataDevices = new datastreams.DataDevices()

let video = document.body.querySelector('video')
video.autoplay = true
// navigator.mediaDevices.getUserMedia({video: true}).then(stream => {
//     video.srcObject = stream
// })


dataDevices.getUserDevice({video: true}).then(device => {
    video.srcObject = device.stream
    device.stream.tracks.forEach(t => {
        t.subscribe(data => {
            console.log('data', data)
        })
    })
})

</script>
</html>